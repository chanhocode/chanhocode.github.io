---
title: "[Spring] CDI(Contexts and Dependency Injection)"
writer: chanho
date: 2024-02-16 14:50:00 +0900
categories: [Backend, Spring]
tags: [backend, spring]
---

'Jakarta Contexts and Dependency Injection'ì€ 'Java EE(Enterprise Edition)' í™˜ê²½ì—ì„œ ì˜ì¡´ì„± ì£¼ì…ê³¼ ê´€ë ¨ëœ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì˜ ê¸°ëŠ¥ì´ë‹¤. CDIëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì»´í¬ë„ŒíŠ¸ ê°„ì˜ `ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³ `, `ëŠìŠ¨í•œ ê²°í•©`ì„ í†µí•´ ìœ ì—°ì„±ê³¼ ì¬ì‚¬ìš©ì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.

## ğŸ’¡ CDIë¥¼ ì™œ ì‚¬ìš©í•˜ëŠ”ê°€?

> ìŠ¤í”„ë§ë„ ì˜ì¡´ì„± ì£¼ì…, AOP(Aspect-Oriented Programming), ì„ ì–¸ì  íŠ¸ëœì­ì…˜ ê´€ë¦¬ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì˜ ì• ë…¸í…Œì´ì…˜ì„ ì œê³µí•œë‹¤. ê·¸ëŸ¼ì—ë„ CDIë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€?

1. Java EE í‘œì¤€ ì¤€ìˆ˜
   > CDIëŠ” ìë°” EEì˜ ê³µì‹ í‘œì¤€ì´ë‹¤. í‘œì¤€ì„ ì¤€ìˆ˜í•˜ëŠ” ê²ƒì€ ê¸°ìˆ ì˜ í˜¸í™˜ì„±ê³¼ ì¥ê¸°ì ì¸ ì§€ì›ì„ ë³´ì¥í•˜ëŠ” ì¸¡ë©´ì—ì„œ ì¤‘ìš”í•˜ë‹¤.
2. ê²°í•©ë„ ê°ì†Œ
   > CDIëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì»´í¬ë„ŒíŠ¸ ê°„ì˜ ê²°í•©ë„ë¥¼ ì¤„ì´ëŠ” ë° ì´ˆì ì„ ë§ì¶”ê³  ìˆë‹¤. ì´ë¥¼ í†µí•´ ë” ìœ ì˜í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤.

# CDI ì˜ì¡´ì„± ì¶”ê°€

```xml
<dependency>
  <groupId>jakarta.inject</groupId>
  <artifactId>jakarta.inject-api</artifactId>
  <version>2.0.1</version>
</dependency>
```

# CDI ì‚¬ìš©

- ì˜ì¡´ì„± ì£¼ì… ì„¤ì •
  > ì˜ì¡´ì„± ì£¼ì…ì„ ìœ„í•´ `@Inject`ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•œë‹¤. ì´ë¥¼ í†µí•´ í•„ìš”í•œ ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…ë°›ì„ ìˆ˜ ìˆë‹¤.
- Bean ì •ì˜
  > CDIì—ì„œ ê´€ë¦¬í•  ê°ì²´ë¥¼ ë¹ˆìœ¼ë¡œ ì •ì˜í•œë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë¹ˆì€ `@Named`ë˜ëŠ” `@ApplicationScoped`, `@SessionScoped`ë“±ì˜ ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ ë²”ìœ„ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.
- Producer ë©”ì†Œë“œ
  > íŠ¹ì • íƒ€ì…ì˜ ê°ì²´ë¥¼ í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ ìƒì„±í•˜ê³  ì‹¶ì„ ë•Œ, `@Produces` ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•œ í”„ë¡œë“€ìŠ¤ ë©”ì†Œë“œë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.
- ì´ë²¤íŠ¸ ì²˜ë¦¬
  > `@Onserves` ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ì´ë²¤íŠ¸ëŠ” `@Inject`ì™€ í•¨ê»˜ ì‚¬ìš©ë˜ëŠ” 'Event'íƒ€ì…ì„ í†µí•´ ë°œí–‰í•  ìˆ˜ ìˆë‹¤.
- ì¸í„°ì…‰í„°ì™€ ë°ì½”ë ˆì´í„° ì‚¬ìš©
  > ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ë¶„ë¦¬ì™€ ì¬ì‚¬ìš©ì„ ìœ„í•´ ì¸í„°ì…‰í„°(`@Interceptor`)ì™€ ë°ì½”ë ˆì´í„°(`@Decorator`)ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

# CDI í™œìš© ì˜ˆì œ

```java
@Named
class BusinessService {
	private DataService dataService;
	public DataService getDataService() {
		return dataService;
	}

	@Inject
	public void setDataService(DataService dataService) {
		System.out.println("Setter Inject");
		this.dataService = dataService;
	}
}

@Named
class DataService {	}

@Configuration
@ComponentScan
public class CdiContextLauncherApplication {
	public static void main(String[] args) {
		try (var context = new AnnotationConfigApplicationContext
				(CdiContextLauncherApplication.class)) {
			System.out.println(context.getBean(BusinessService.class).getDataService());
		} catch (BeansException e) {
			e.printStackTrace();
		}
	}
}
```
